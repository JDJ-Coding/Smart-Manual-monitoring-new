# 회사 PC 사용 가이드

## 1. 집에서 준비할 것 (USB에 담아가기)

다음 두 폴더를 USB에 복사합니다.

| 폴더 | 용량 | 설명 |
|------|------|------|
| `node_modules/` | ~750MB | 실행에 필요한 라이브러리 |
| `model/` | ~130MB | 오프라인 AI 임베딩 모델 |

> **경로**: `C:\Users\장덕진\Desktop\코드\Smart-Manual-monitoring-new\` 안의 두 폴더

---

## 2. 회사 PC 최초 설치 (처음 한 번만)

### 2-1. Git pull로 코드 받기

```bash
cd [프로젝트 경로]
git pull
```

### 2-2. USB에서 폴더 복사

USB의 `node_modules/`와 `model/` 폴더를 프로젝트 루트에 붙여넣기

```
Smart-Manual-monitoring-new/
├── node_modules/     ← USB에서 복사
├── model/            ← USB에서 복사
├── src/
├── package.json
└── ...
```

### 2-3. .env.local 파일 생성

프로젝트 루트에 `.env.local` 파일을 새로 만들고 아래 내용 입력:

```
ADMIN_PASSWORD=posco
```

> `POSCO_GPT_KEY`는 이미 윈도우 시스템 환경변수에 등록되어 있으므로 별도 입력 불필요

---

## 3. 실행 방법

터미널(PowerShell 또는 cmd)에서 프로젝트 폴더로 이동 후:

```bash
npm run dev
```

브라우저에서 접속:
```
http://localhost:3000
```

---

## 4. 기본 사용 흐름

### 최초 PDF 등록 (DB 구축)

1. `http://localhost:3000/admin/login` 접속
2. 비밀번호 `posco` 입력
3. PDF 파일 업로드 (드래그앤드롭 또는 파일 선택)
4. **"DB 전체 재구축"** 버튼 클릭
5. 완료 메시지 확인 (파일 크기에 따라 수 분 소요)

> DB 구축은 PDF를 새로 추가/삭제할 때마다 반복 필요

### 채팅 사용

1. `http://localhost:3000` 접속
2. 좌측 사이드바에서 검색할 매뉴얼 선택 (전체 또는 특정 파일)
3. 하단 입력창에 질문 입력
4. AI 답변 + 참조 문서(파일명, 페이지) 확인

---

## 5. 이후 코드 업데이트 방법 (집에서 수정 후)

```bash
# 회사 PC에서
git pull
```

`node_modules/`와 `model/`은 git에서 제외되어 있으므로 pull해도 영향 없음.
**새 패키지가 추가된 경우에만** USB로 `node_modules/`를 다시 복사.

---

## 6. 서버 종료 방법

터미널에서 `Ctrl + C`

---

## 7. 문제 해결

| 증상 | 원인 | 해결 |
|------|------|------|
| `npm run dev` 오류 | node_modules 누락 | USB에서 node_modules 복사 확인 |
| 첫 질문 응답이 느림 (10~20초) | ONNX 모델 최초 로딩 | 정상 동작, 이후 질문은 빠름 |
| GPT 응답 없음 | POSCO_GPT_KEY 환경변수 미등록 | 시스템 환경변수에 POSCO_GPT_KEY 등록 |
| 관리자 로그인 안 됨 | .env.local 파일 없음 | .env.local 생성 후 `ADMIN_PASSWORD=posco` 입력 |
| 포트 충돌 | 3000번 포트 사용 중 | 기존 Node.js 프로세스 종료 후 재실행 |
